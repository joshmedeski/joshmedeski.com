---
import Layout from "../components/Layout.astro";
import PostCard from "../components/post/PostCard.astro";
import PageTitle from "../components/PageTitle.astro";
import { getCollection } from "astro:content";
import Wrapper from "~/components/Wrapper.astro";

const allPosts = await getCollection("posts", ({ data: { draft } }) => !draft);
const sortedPosts = allPosts.sort(
  ({ data: a }, { data: b }) => b.pubDate.getTime() - a.pubDate.getTime()
);
---

<Layout title="Posts">
  <Wrapper>
    <PageTitle>Posts</PageTitle>
    <section class="mb-32 grid items-stretch gap-4 sm:grid-cols-2 sm:gap-8">
      {sortedPosts.map((post) => <PostCard post={post} />)}
    </section>
  </Wrapper>
</Layout>
