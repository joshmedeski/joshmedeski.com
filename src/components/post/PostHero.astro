---
import { categories, Category } from "../../models/Category.astro";
import clsx from "clsx";

import type { CollectionEntry } from "astro:content";

interface Props {
  post: CollectionEntry<"posts">;
}

const {
  post: {
    slug,
    data: { categorySlug, heroImage, title, pubDate, description },
  },
} = Astro.props;
const cat = categories.find((cat) => cat.slug === categorySlug) as Category;
---

<div class="bg-neutral-50">
  <section class="mx-auto w-full max-w-screen-xl px-4 pt-16">
    <a href={`/posts/${slug}`} class="mb-6 lg:flex">
      <img
        src={heroImage}
        alt={title}
        class="aspect-video w-full max-w-xl rounded-md shadow-md sm:mr-10"
      />

      <div class="mx-10 mt-10">
        <div
          class={clsx(
            "flex justify-between mb-2 font-medium tracking-wide",
            cat.style?.desc
          )}
        >
          <div class="flex text-sm">
            <cat.icon class="mr-2 w-4" />
            <p class="mr-2 block">
              {cat.title}
            </p>
            <time datetime={String(pubDate)}>
              {
                new Date(pubDate).toLocaleDateString("en-US", {
                  dateStyle: "long",
                })
              }
            </time>
          </div>
        </div>

        <h3 class={clsx("font-extrabold leading-none mb-4 text-3xl")}>
          {title}
        </h3>

        <p class="mb-2 text-lg">{description}</p>
      </div>
    </a>
  </section>
</div>
