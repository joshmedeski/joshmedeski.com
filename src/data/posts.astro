---
import type { BlogPostFrontmatter } from "../layouts/BlogPost.astro";
const isProd = import.meta.env.PROD;
export const getAllPosts = async () => {
  return (await Astro.glob<BlogPostFrontmatter>("../pages/posts/*.mdx"))
    .sort(
      (a, b) =>
        new Date(b.frontmatter.pubDate).valueOf() -
        new Date(a.frontmatter.pubDate).valueOf()
    )
    .filter(({ frontmatter: { draft } }) => (isProd ? !draft : true));
};
---
